# Authoring Checklist

Pre-delivery quality gate for every opensci library skill.
Run through every item before declaring the skill done. Zero exceptions.

---

## Frontmatter

- [ ] `name` field is present
- [ ] `name` matches the parent directory name exactly
- [ ] `name` is lowercase alphanumeric + hyphens only (`^[a-z][a-z0-9-]*$`)
- [ ] `name` contains no consecutive hyphens (`--`)
- [ ] `name` does not start or end with a hyphen
- [ ] `name` is ≤64 characters
- [ ] `description` field is present
- [ ] `description` answers "what does this skill do + when should it be used"
- [ ] `description` includes concrete library/function/concept keywords (not vague)
- [ ] `description` is ≤1024 characters
- [ ] No frontmatter fields other than `name` and `description` are present

---

## SKILL.md Body

- [ ] Total line count is ≤500 lines
- [ ] No "When to Use", "Trigger", or "Use This Skill When" section exists in the body
- [ ] Every Quick Start code block uses real imports and produces runnable output (no pseudocode, no `...` placeholders in executable paths)
- [ ] Data-dependent libraries: every Quick Start that requires external files has a synthetic data fallback block immediately below it, clearly commented
- [ ] Structured-data APIs: fallback examples use minimal valid typed containers when raw NumPy arrays are not accepted
- [ ] Every section ends with a `See references/<domain>.md` pointer (or equivalent)
- [ ] No content is duplicated between SKILL.md and any `references/` file
- [ ] Any claim not verified from source code or official docs is tagged `[UNVERIFIED: verify against <source>]`
- [ ] Every paragraph passes the token economy test: Claude couldn't already answer this from training data alone

---

## Directory Structure

- [ ] `SKILL.md` is present at skill root
- [ ] `references/` directory exists and contains at least one `.md` file
- [ ] `assets/` directory exists
- [ ] `assets/module-map.md` is present (all modes — generated by `map-modules.py`)
- [ ] `assets/version.txt` is present (all modes — captured at Step 0)
- [ ] `assets/api-dump.md` is present (Medium and Heavy modes only)
- [ ] For `coverage_profile: dictionary|hybrid`, `assets/symbol-index.md` is present
- [ ] For `coverage_profile: dictionary|hybrid`, `assets/symbol-index.jsonl` is present
- [ ] For `coverage_profile: dictionary|hybrid`, `assets/symbol-cards/` exists and contains module card files
- [ ] No forbidden files exist anywhere in the skill folder:
  - [ ] No `README.md`
  - [ ] No `CHANGELOG.md`
  - [ ] No `INSTALLATION_GUIDE.md`
  - [ ] No `CONTRIBUTING.md`
- [ ] No files exist at the skill root other than `SKILL.md` (and `assets/`, `references/`, `scripts/`)
- [ ] `scripts/` files (if present) are `.py` and runnable standalone

---

## Mode-Specific Checks

### Light mode
- [ ] All claims link to a public doc URL or are tagged `[UNVERIFIED]`
- [ ] No code examples require local source installation
- [ ] `assets/module-map.md` was built from filesystem walk (not import), OR library is pip-installable and import succeeded
- [ ] Install permission + environment selection decision is recorded in `assets/version.txt`

### Medium mode (all Light checks plus)
- [ ] Every code example has been executed and output verified
- [ ] Snippet verifier passed: `python opensci-skill/scripts/verify-snippets.py --root <library> --fail-fast`
- [ ] `assets/api-dump.md` is present (generated by `extract-api-patterns.py`)
- [ ] If execution required installation, install was explicitly approved and performed in the selected environment
- [ ] Import errors in `extract-api-patterns.py` output are explained or expected

### Coverage profile checks
- [ ] `assets/version.txt` contains `coverage_profile: workflow|dictionary|hybrid`
- [ ] For `coverage_profile: dictionary|hybrid`, symbol lookup works via `assets/symbol-index.jsonl` + `assets/symbol-cards/` without opening source files first

### Heavy mode (all Medium checks plus)
- [ ] Every major function/class has a `# Source: <file>.py:L<n>` annotation in reference files
- [ ] Functions derived from published methods have a `# Paper: <DOI or citation>` annotation
- [ ] All large source files (flagged `[LARGE]` in `assets/module-map.md`) were read and key patterns documented
- [ ] `__init__.py` import mechanism (eager/lazy/`__all__`) is documented in `assets/module-map.md`

---

## Reference Files

- [ ] Each `references/<domain>.md` covers a single, clearly scoped functional domain
- [ ] Each reference file does NOT link to other reference files (no chained references)
- [ ] Every reference file with >100 lines has a TOC at the top
- [ ] Every code example in reference files is complete and runnable
- [ ] Parameter tables are present for every function/class with non-obvious parameters
- [ ] No content from reference files is copy-pasted into SKILL.md
- [ ] Heavy mode: source file line annotations (`# Source:`) present for non-obvious implementations
- [ ] No authoring `# INSTRUCTION:` comments or "Depth by Mode" authoring tables remain in any delivered `references/` file (must be deleted during authoring, not left as comments)

---

## Scripts

- [ ] `map-modules.py` was run; `assets/module-map.md` output was reviewed before writing reference files
- [ ] `__init__.py` import style (eager star-imports, lazy `__getattr__`, `__all__`) is noted in `assets/module-map.md`
- [ ] If `map-modules.py` reported **`API mode : lazy_loader detected`**, the companion `.pyi` stub was opened and reviewed directly as the public API source of truth
- [ ] If `extract-api-patterns.py` was used, output in `assets/api-dump.md` was reviewed before writing Quick Reference
- [ ] If `build-symbol-index.py` was used, `assets/symbol-index.jsonl` and `assets/symbol-cards/` were reviewed before writing references
- [ ] If `fetch-docs.py` was used, output in `assets/docs-cache/` was reviewed
- [ ] If `fetch-docs.py` was used, `requests` + `html2text` were installed (or html2text fallback was explicitly accepted and noted)
- [ ] If `fetch-local-rst.py` was used, output in `assets/docs-cache/` was reviewed
- [ ] Large `assets/` files were reviewed via targeted symbol/path lookups (not full-file dumps)

---

## Version Awareness

- [ ] Library version recorded in `assets/version.txt` before any skill content was written
- [ ] `assets/version.txt` records `environment`, `python_executable`, `install_permission`, `install_scope`, and `package_manager`
- [ ] `assets/version.txt` records `coverage_profile`
- [ ] `## Version` section present in target skill's `SKILL.md` with exact version string
- [ ] Changelog/migration files were consulted; their location is noted in `assets/version.txt`
- [ ] If editable install failed, wheel fallback mode + failure reason were recorded in `assets/version.txt`
- [ ] Any function/behavior known to differ across versions is tagged `[VERSION: changed in X.Y — description]`
- [ ] Any function requiring optional dependencies is tagged `[REQUIRES: <pkg>[extra]]`
- [ ] Quick Start code blocks include `# tested against <pkg>==X.Y.Z` comment
- [ ] If `map-modules.py` reported **`API mode : lazy_loader detected`**, `__init__.pyi` was used as the public API source of truth (not `__init__.py`)

---

## Final Check

- [ ] The skill can be understood in two passes: frontmatter (trigger) → SKILL.md (orientation) → references/ (deep dive)
- [ ] A user who has never used the library could run the Quick Start snippets and get output (or knows exactly what data file to provide)
- [ ] No commercial plugs, promotional content, or external service advertisements
